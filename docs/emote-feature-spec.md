# エモート機能仕様書

## 概要
ゲーム中にプレイヤー間でエモートを送信できる機能を追加する。エモートは感情表現やリアクションとして使用され、ゲームをより楽しくインタラクティブにすることを目的とする。

## エモートの種類
以下の3種類のエモートを実装する：
- 👎 (サムズダウン) - 不満や失望を表現
- 🔥 (ファイア) - 興奮や盛り上がりを表現
- 🚮 (ゴミ箱) - がっかりや投げやりな気持ちを表現

## UI仕様

### 送信側UI
- **配置場所**: ゲームボード上の自分のプレイヤー名の横
- **表示形式**: 3つのボタンとして表示
- **ボタンデザイン**: 
  - エモート記号を直接表示
  - ホバー時に軽くハイライト
  - クリック時に押下フィードバック
- **表示条件**: ゲーム中のみ表示（ゲーム開始前やゲーム終了後は非表示）

### 受信側UI
- **表示場所**: 送信者のプレイヤー名の横
- **表示形式**: 吹き出し内にエモート記号を表示
- **表示時間**: 2秒間表示後、自動的にフェードアウト
- **アニメーション**: 
  - 表示時: フェードイン（0.2秒）
  - 非表示時: フェードアウト（0.3秒）
- **複数エモート**: 同じプレイヤーから連続してエモートが送信された場合、既存の表示を更新

## 通信仕様

### Socket.ioイベント

#### クライアント→サーバー
- **イベント名**: `sendEmote`
- **ペイロード**: 
  ```typescript
  {
    emoteType: '👎' | '🔥' | '🚮'
  }
  ```

#### サーバー→クライアント
- **イベント名**: `receiveEmote`
- **ペイロード**:
  ```typescript
  {
    playerId: string,
    emoteType: '👎' | '🔥' | '🚮'
  }
  ```
- **配信対象**: 送信者を含む全プレイヤー

## 技術仕様

### フロントエンド
- **コンポーネント構成**:
  - `EmoteButtons`: エモート送信ボタングループ
  - `EmoteBubble`: エモート表示用吹き出しコンポーネント
- **状態管理**: 
  - 各プレイヤーの現在表示中のエモートを管理
  - タイマー管理（2秒後の自動非表示）

### バックエンド
- **ハンドラー追加**: Socket.ioハンドラーに`sendEmote`イベント処理を追加
- **バリデーション**: 
  - ゲーム参加中のプレイヤーからの送信のみ受付
  - 有効なエモートタイプのみ受付

## 制限事項
- **連続送信制限**: なし（ユーザーは好きなだけエモートを送信可能）
- **データ永続化**: なし（エモートの履歴はデータベースに保存しない）
- **ゲーム外での使用**: 不可（ゲーム中のみ使用可能）

## 実装優先順位
1. バックエンドのSocket.ioイベントハンドラー実装
2. フロントエンドのエモート送信機能実装
3. フロントエンドのエモート受信・表示機能実装
4. UIの洗練（アニメーション、デザイン調整）

## 今後の拡張可能性
- エモートの種類追加
- エモート送信のクールダウン機能
- カスタムエモート機能